<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="Z,cE6q{I]MSAg34|,#:v">start</variable><variable id="H}ulmOBr;!SGC{X2kMu5">initialDirection</variable><variable id="a2#)IzuPBxheI$@=k)RK">currentDirection</variable><variable id="niZNe8+zu^H_Stn2yj^h">stopTime1</variable><variable id="o9J;K.Mig$R-XQ_f!){l">stopTime2</variable></variables><block type="device_forever" x="354" y="-16"><statement name="HANDLER"><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="Z,cE6q{I]MSAg34|,#:v">start</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="variables_set"><field name="VAR" id="a2#)IzuPBxheI$@=k)RK">currentDirection</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_js_round"><field name="OP">ceil</field><value name="ARG0"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_heading"/></value></block></value><next><block type="function_call"><mutation name="DetectDoor" functionid="jfqTAr5]TN^R!=%k;g3)"/></block></next></block></statement><statement name="ELSE"><block type="serial_writeline"><value name="text"><shadow type="text"><field name="TEXT">"Device is not running"</field></shadow></value><next><block type="device_pause"><value name="pause"><shadow type="timePicker"><field name="ms">1000</field></shadow></value></block></next></block></statement></block></statement></block><block type="device_button_event" x="25" y="51"><field name="NAME">Button.A</field><statement name="HANDLER"><block type="function_call"><mutation name="Restart" functionid="_jD6}hH*wH1_,:}rEk51"/></block></statement></block><block type="device_button_event" x="25" y="208"><field name="NAME">Button.B</field><statement name="HANDLER"><block type="variables_set"><field name="VAR" id="Z,cE6q{I]MSAg34|,#:v">start</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow></value></block></statement></block><block type="pxt-on-start" x="29" y="371"><statement name="HANDLER"><block type="variables_set"><field name="VAR" id="Z,cE6q{I]MSAg34|,#:v">start</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow></value><next><block type="radio_set_group"><value name="ID"><shadow type="math_number_minmax"><mutation min="0" max="255" label="Id" precision="0"/><field name="SLIDER">1</field></shadow></value></block></next></block></statement></block><block type="function_definition" x="560" y="369"><mutation name="Restart" functionid="_jD6}hH*wH1_,:}rEk51"/><field name="function_name">Restart</field><statement name="STACK"><block type="variables_set"><field name="VAR" id="Z,cE6q{I]MSAg34|,#:v">start</field><value name="VALUE"><shadow type="math_number"><field name="NUM">1</field></shadow></value><next><block type="variables_set"><field name="VAR" id="H}ulmOBr;!SGC{X2kMu5">initialDirection</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_js_round"><field name="OP">ceil</field><value name="ARG0"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_heading"/></value></block></value><next><block type="variables_set"><field name="VAR" id="a2#)IzuPBxheI$@=k)RK">currentDirection</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="H}ulmOBr;!SGC{X2kMu5">initialDirection</field></block></value><next><block type="variables_set"><field name="VAR" id="o9J;K.Mig$R-XQ_f!){l">stopTime2</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="function_definition" x="81" y="662"><mutation name="DetectDoor" functionid="jfqTAr5]TN^R!=%k;g3)"/><field name="function_name">DetectDoor</field><statement name="STACK"><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate"><value name="BOOL"><block type="function_call_output"><mutation name="inRange" functionid="x=:Q*:w,7}I@TxD#CGTf"><arg name="num" id="p?Rvk^uRPzAejB?0qqvF" type="number"/></mutation><value name="p?Rvk^uRPzAejB?0qqvF"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get"><field name="VAR" id="a2#)IzuPBxheI$@=k)RK">currentDirection</field></block></value></block></value></block></value><statement name="DO0"><block type="serial_writeline"><value name="text"><shadow type="text"><field name="TEXT">"Door is moving"</field></shadow></value><next><block type="device_pause"><value name="pause"><shadow type="timePicker"><field name="ms">1000</field></shadow></value></block></next></block></statement><statement name="ELSE"><block type="controls_repeat_ext"><value name="TIMES"><shadow type="math_whole_number"><field name="NUM">4</field></shadow></value><statement name="DO"><block type="device_pause"><value name="pause"><shadow type="timePicker"><field name="ms">500</field></shadow></value><next><block type="variables_set"><field name="VAR" id="a2#)IzuPBxheI$@=k)RK">currentDirection</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_js_round"><field name="OP">ceil</field><value name="ARG0"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_heading"/></value></block></value><next><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate"><value name="BOOL"><block type="function_call_output"><mutation name="inRange" functionid="x=:Q*:w,7}I@TxD#CGTf"><arg name="num" id="p?Rvk^uRPzAejB?0qqvF" type="number"/></mutation><value name="p?Rvk^uRPzAejB?0qqvF"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get"><field name="VAR" id="a2#)IzuPBxheI$@=k)RK">currentDirection</field></block></value></block></value></block></value><statement name="DO0"><block type="serial_writeline"><value name="text"><shadow type="text"><field name="TEXT">"Door is still moving"</field></shadow></value><next><block type="break_keyword"/></next></block></statement><statement name="ELSE"><block type="variables_change"><field name="VAR" id="o9J;K.Mig$R-XQ_f!){l">stopTime2</field><value name="VALUE"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block></statement></block></next></block></next></block></statement><next><block type="controls_if"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="o9J;K.Mig$R-XQ_f!){l">stopTime2</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">4</field></shadow></value></block></value><statement name="DO0"><block type="serial_writeline"><value name="text"><shadow type="text"><field name="TEXT">"Door is closed</field></shadow></value><next><block type="device_pause"><value name="pause"><shadow type="timePicker"><field name="ms">1000</field></shadow></value></block></next></block></statement><next><block type="variables_set"><field name="VAR" id="o9J;K.Mig$R-XQ_f!){l">stopTime2</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow></value></block></next></block></next></block></statement></block></statement></block><block type="function_definition" x="788" y="683"><mutation name="inRange" functionid="x=:Q*:w,7}I@TxD#CGTf"><arg name="num" id="p?Rvk^uRPzAejB?0qqvF" type="number"/></mutation><field name="function_name">inRange</field><value name="p?Rvk^uRPzAejB?0qqvF"><shadow type="argument_reporter_number"><field name="VALUE">num</field></shadow></value><statement name="STACK"><block type="serial_writeline"><value name="text"><shadow type="text"><field name="TEXT"/></shadow><block type="math_arithmetic"><field name="OP">MINUS</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number"><field name="VALUE">num</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">3</field></shadow><block type="variables_get"><field name="VAR" id="H}ulmOBr;!SGC{X2kMu5">initialDirection</field></block></value></block></value><next><block type="controls_if"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">LTE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_op3"><value name="x"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic"><field name="OP">MINUS</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number"><field name="VALUE">num</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">3</field></shadow><block type="variables_get"><field name="VAR" id="H}ulmOBr;!SGC{X2kMu5">initialDirection</field></block></value></block></value></block></value><value name="B"><shadow type="math_number"><field name="NUM">3</field></shadow></value></block></value><statement name="DO0"><block type="function_return"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean"><field name="BOOL">TRUE</field></block></value></block></statement><next><block type="function_return"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean"><field name="BOOL">FALSE</field></block></value></block></next></block></next></block></statement></block></xml>